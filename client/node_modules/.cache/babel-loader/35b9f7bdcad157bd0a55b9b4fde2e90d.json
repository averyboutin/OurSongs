{"ast":null,"code":"var _jsxFileName = \"/Users/averyboutin/Repos/OurSongs/client/src/components/comments/newComment.jsx\";\nimport React, { Component } from \"react\";\nimport Track from \"../posts/track\";\nimport \"./newComment.scss\";\n\nclass NewComment extends Component {\n  constructor() {\n    super();\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      this.setState({\n        results: [],\n        commentSong: \"\",\n        commentDescription: \"\",\n        isMakingNew: false\n      });\n      fetch(\"/api/comments\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          PostID: this.props.PostID,\n          CommentDescription: e.target[1].value,\n          CommentSong: e.target[0].value,\n          UserID: this.props.UserID\n        })\n      }).then(() => {\n        this.props.refresh();\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.handleOnChange = e => {\n      this.setState({\n        commentSong: e.target.value\n      });\n      fetch(\"https://api.spotify.com/v1/search?q=\".concat(e.target.value, \"&type=track&market=US&limit=6\"), {\n        headers: {\n          Authorization: \"Bearer \".concat(this.props.token)\n        }\n      }).then(res => res.json()).then(result => {\n        this.setState({\n          results: result.tracks.items\n        });\n      }).catch(err => {\n        console.log(err);\n        this.setState({\n          results: []\n        });\n      });\n    };\n\n    this.handleTrackClick = id => {\n      this.setState({\n        results: [],\n        commentSong: id\n      });\n    };\n\n    this.handleCreateNewComment = () => {\n      this.setState({\n        isMakingNew: true\n      });\n    };\n\n    this.handleCancel = () => {\n      this.setState({\n        results: [],\n        commentSong: \"\",\n        commentDescription: \"\",\n        isMakingNew: false\n      });\n    };\n\n    this.state = {\n      results: [],\n      commentSong: \"\",\n      commentDescription: \"\",\n      isMakingNew: false\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, this.state.isMakingNew ? React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"form-text text-muted\",\n      htmlFor: \"CommentSong\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"Enter Spotify Track ID\"), React.createElement(\"input\", {\n      onChange: this.handleOnChange,\n      value: this.state.commentSong,\n      className: \"form-control\",\n      type: \"text\",\n      name: \"CommentSong\",\n      id: \"CommentSong\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, this.state.results.map(track => React.createElement(Track, {\n      key: track.id,\n      trackClick: this.handleTrackClick,\n      trackAlbumArtUrl: track.album.images[2].url,\n      trackTitle: track.name,\n      trackArtist: track.artists[0].name,\n      trackAlbum: track.album.name,\n      id: track.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"form-text text-muted\",\n      htmlFor: \"CommentDescription\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"Enter Description\"), React.createElement(\"input\", {\n      onChange: e => this.setState({\n        commentDescription: e.target.value\n      }),\n      value: this.state.commentDescription,\n      className: \"form-control\",\n      type: \"text\",\n      name: \"CommentDescription\",\n      id: \"CommentDescription\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"commentOrCancel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary\",\n      onClick: this.handleCancel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"Cancel\"), React.createElement(\"input\", {\n      className: \"btn btn-primary\",\n      type: \"submit\",\n      value: \"Comment\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }))) : React.createElement(\"button\", {\n      onClick: this.handleCreateNewComment,\n      className: \"btn btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, \"Make Comment\"));\n  }\n\n}\n\nexport default NewComment;","map":{"version":3,"sources":["/Users/averyboutin/Repos/OurSongs/client/src/components/comments/newComment.jsx"],"names":["React","Component","Track","NewComment","constructor","handleSubmit","e","preventDefault","setState","results","commentSong","commentDescription","isMakingNew","fetch","method","headers","body","JSON","stringify","PostID","props","CommentDescription","target","value","CommentSong","UserID","then","refresh","catch","err","console","log","handleOnChange","Authorization","token","res","json","result","tracks","items","handleTrackClick","id","handleCreateNewComment","handleCancel","state","render","map","track","album","images","url","name","artists"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Track from \"../posts/track\";\r\nimport \"./newComment.scss\";\r\n\r\nclass NewComment extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      results: [],\r\n      commentSong: \"\",\r\n      commentDescription: \"\",\r\n      isMakingNew: false\r\n    };\r\n  }\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n    this.setState({\r\n      results: [],\r\n      commentSong: \"\",\r\n      commentDescription: \"\",\r\n      isMakingNew: false\r\n    });\r\n\r\n    fetch(\"/api/comments\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({\r\n        PostID: this.props.PostID,\r\n        CommentDescription: e.target[1].value,\r\n        CommentSong: e.target[0].value,\r\n        UserID: this.props.UserID\r\n      })\r\n    })\r\n      .then(() => {\r\n        this.props.refresh();\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  handleOnChange = e => {\r\n    this.setState({ commentSong: e.target.value });\r\n    fetch(\r\n      `https://api.spotify.com/v1/search?q=${e.target.value}&type=track&market=US&limit=6`,\r\n      {\r\n        headers: {\r\n          Authorization: `Bearer ${this.props.token}`\r\n        }\r\n      }\r\n    )\r\n      .then(res => res.json())\r\n      .then(result => {\r\n        this.setState({\r\n          results: result.tracks.items\r\n        });\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n        this.setState({ results: [] });\r\n      });\r\n  };\r\n\r\n  handleTrackClick = id => {\r\n    this.setState({ results: [], commentSong: id });\r\n  };\r\n\r\n  handleCreateNewComment = () => {\r\n    this.setState({ isMakingNew: true });\r\n  };\r\n\r\n  handleCancel = () => {\r\n    this.setState({\r\n      results: [],\r\n      commentSong: \"\",\r\n      commentDescription: \"\",\r\n      isMakingNew: false\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        {this.state.isMakingNew ? (\r\n          <form onSubmit={this.handleSubmit}>\r\n            <div className=\"form-group\">\r\n              <label className=\"form-text text-muted\" htmlFor=\"CommentSong\">\r\n                Enter Spotify Track ID\r\n              </label>\r\n              <input\r\n                onChange={this.handleOnChange}\r\n                value={this.state.commentSong}\r\n                className=\"form-control\"\r\n                type=\"text\"\r\n                name=\"CommentSong\"\r\n                id=\"CommentSong\"\r\n              />\r\n            </div>\r\n            <div>\r\n              {this.state.results.map(track => (\r\n                <Track\r\n                  key={track.id}\r\n                  trackClick={this.handleTrackClick}\r\n                  trackAlbumArtUrl={track.album.images[2].url}\r\n                  trackTitle={track.name}\r\n                  trackArtist={track.artists[0].name}\r\n                  trackAlbum={track.album.name}\r\n                  id={track.id}\r\n                />\r\n              ))}\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <label\r\n                className=\"form-text text-muted\"\r\n                htmlFor=\"CommentDescription\"\r\n              >\r\n                Enter Description\r\n              </label>\r\n              <input\r\n                onChange={e =>\r\n                  this.setState({ commentDescription: e.target.value })\r\n                }\r\n                value={this.state.commentDescription}\r\n                className=\"form-control\"\r\n                type=\"text\"\r\n                name=\"CommentDescription\"\r\n                id=\"CommentDescription\"\r\n              />\r\n            </div>\r\n            <div className=\"commentOrCancel\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-primary\"\r\n                onClick={this.handleCancel}\r\n              >\r\n                Cancel\r\n              </button>\r\n              <input\r\n                className=\"btn btn-primary\"\r\n                type=\"submit\"\r\n                value=\"Comment\"\r\n              />\r\n            </div>\r\n          </form>\r\n        ) : (\r\n          <button\r\n            onClick={this.handleCreateNewComment}\r\n            className=\"btn btn-primary\"\r\n          >\r\n            Make Comment\r\n          </button>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NewComment;\r\n"]},"metadata":{},"sourceType":"module"}