{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Xavier\\\\Documents\\\\School\\\\Fall 2019\\\\Distributed Web Systems Design\\\\OurSongs\\\\client\\\\src\\\\App.js\";\nimport React, { Component } from \"react\";\nimport \"bootswatch/dist/cosmo/bootstrap.min.css\";\nimport \"./App.scss\";\nimport Posts from \"./components/posts/posts\";\nimport Post from \"./components/posts/post\";\nimport Navbar from \"./components/navbar/navbar\";\nimport Comments from \"./components/comments/comments\";\nimport LogIn from \"./components/users/login\";\nimport SignUp from \"./components/users/signUp\";\nimport Welcome from \"./components/users/welcome\";\nconst hash = window.location.hash.substring(1).split(\"&\").reduce(function (initial, item) {\n  if (item) {\n    var parts = item.split(\"=\");\n    initial[parts[0]] = decodeURIComponent(parts[1]);\n  }\n\n  return initial;\n}, {});\nwindow.location.hash = \"\";\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    this.handleSignUpOpen = () => {\n      this.setState({\n        isSigningUp: true,\n        isViewingPosts: false,\n        isLoggingIn: false,\n        isViewingComments: false\n      });\n    };\n\n    this.handleSignUpClose = () => {\n      this.setState({\n        isSigningUp: false,\n        isViewingPosts: true,\n        isLoggingIn: false,\n        isViewingComments: false\n      });\n    };\n\n    this.handleSignUp = UserName => {\n      this.setState({\n        UserName: UserName,\n        isWelcoming: true\n      });\n      this.handleSignUpClose();\n    };\n\n    this.handleWelcomeGoBack = () => {\n      this.setState({\n        isWelcoming: false,\n        UserName: \"\"\n      }, this.handleLogInOpen());\n    };\n\n    this.handleLogIn = UserName => {\n      this.setState({\n        UserName: UserName,\n        isLoggedIn: true,\n        isViewingPosts: true,\n        isLoggingIn: false\n      });\n    };\n\n    this.handleLogOut = () => {\n      fetch(\"/api/token\").then(res => res.json()).then(result => this.setState({\n        token: result.access_token\n      })).then(this.setState({\n        isLoggedIn: false,\n        UserName: \"\",\n        isLoggedInWithSpotify: false\n      }));\n    };\n\n    this.handleLogInOpen = () => {\n      this.setState({\n        isLoggingIn: true,\n        isViewingPosts: false,\n        isSigningUp: false,\n        isViewingComments: false\n      });\n    };\n\n    this.handleLogInClose = () => {\n      this.setState({\n        isLoggingIn: false,\n        isViewingPosts: true,\n        isSigningUp: false,\n        isViewingComments: false\n      });\n    };\n\n    this.handleViewComments = e => {\n      this.setState({\n        isViewingPosts: false,\n        isViewingComments: true,\n        commentsData: {\n          UserName: e.UserName,\n          PostID: e.PostID,\n          PostSong: e.PostSong,\n          PostDescription: e.PostDescription,\n          pageNumber: e.pageNumber,\n          PostDate: e.PostDate,\n          Playlist: e.Playlist\n        }\n      });\n    };\n\n    this.handleGoBackComments = () => {\n      this.setState({\n        isViewingPosts: true,\n        isViewingComments: false,\n        commentsPostID: -1\n      });\n    };\n\n    this.state = {\n      token: \"\",\n      isLoggedIn: false,\n      isLoggedInWithSpotify: false,\n      UserName: \"\",\n      spotifyUserID: \"\",\n      isWelcoming: false,\n      isSigningUp: false,\n      isLoggingIn: false,\n      isViewingPosts: false,\n      isViewingComments: false,\n      commentsData: {\n        UserName: \"\",\n        PostID: -1,\n        PostSong: \"\",\n        PostDescription: \"\",\n        pageNumber: 0,\n        PostDate: \"\",\n        Playlist: \"\"\n      }\n    };\n  }\n\n  componentDidMount() {\n    let _token = hash.access_token;\n\n    if (_token) {\n      //use spotify implicit grant token\n      this.setState({\n        token: _token\n      }, () => {\n        fetch(\"https://api.spotify.com/v1/me\", {\n          headers: {\n            Authorization: \"Bearer \".concat(this.state.token)\n          }\n        }).then(res => {\n          return res.json();\n        }).then(result => {\n          console.log(result);\n          this.setState({\n            isLoggedIn: true,\n            isLoggedInWithSpotify: true,\n            UserName: result.display_name,\n            spotifyUserID: result.id,\n            isViewingPosts: true\n          });\n        });\n      });\n    } else {\n      //use spotify client creditials flow token\n      fetch(\"/api/token\").then(res => res.json()).then(result => this.setState({\n        token: result.access_token\n      })).then(this.setState({\n        isViewingPosts: true\n      }));\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, this.state.isWelcoming && React.createElement(Welcome, {\n      UserName: this.state.UserName,\n      handleWelcomeGoBack: this.handleWelcomeGoBack,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }), React.createElement(Navbar, {\n      UserName: this.state.UserName,\n      isLoggedIn: this.state.isLoggedIn,\n      handleSignUpOpen: this.handleSignUpOpen,\n      handleLogInOpen: this.handleLogInOpen,\n      handleLogOut: this.handleLogOut,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, this.state.isSigningUp && React.createElement(SignUp, {\n      handleSignUpClose: this.handleSignUpClose,\n      handleSignUp: this.handleSignUp,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }), this.state.isLoggingIn && React.createElement(LogIn, {\n      handleLogInClose: this.handleLogInClose,\n      handleLogIn: this.handleLogIn,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }), this.state.isViewingComments && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-secondary go-back-comments\",\n      onClick: this.handleGoBackComments,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, \"Go Back\"), React.createElement(\"div\", {\n      className: \"posts-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, React.createElement(Post, {\n      UserName: this.state.commentsData.UserName,\n      currentUserName: this.state.UserName,\n      PostID: this.state.commentsData.PostID,\n      song: this.state.commentsData.PostSong,\n      description: this.state.commentsData.PostDescription,\n      PostDate: this.state.commentsData.PostDate,\n      Playlist: this.state.commentsData.Playlist,\n      token: this.state.token,\n      isViewingComments: this.state.isViewingComments,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    })), React.createElement(Comments, {\n      isLoggedIn: this.state.isLoggedIn,\n      isLoggedInWithSpotify: this.state.isLoggedInWithSpotify,\n      UserName: this.state.commentsData.UserName,\n      currentUserName: this.state.UserName,\n      PostID: this.state.commentsData.PostID,\n      Playlist: this.state.commentsData.Playlist,\n      handleGoBackComments: this.handleGoBackComments,\n      token: this.state.token,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    })), this.state.isViewingPosts && React.createElement(Posts, {\n      isLoggedIn: this.state.isLoggedIn,\n      isLoggedInWithSpotify: this.state.isLoggedInWithSpotify,\n      currentUserName: this.state.UserName,\n      spotifyUserID: this.state.spotifyUserID,\n      handleViewComments: this.handleViewComments,\n      isViewingComments: this.state.isViewingComments,\n      pageNumber: this.state.commentsData.pageNumber,\n      token: this.state.token,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/Xavier/Documents/School/Fall 2019/Distributed Web Systems Design/OurSongs/client/src/App.js"],"names":["React","Component","Posts","Post","Navbar","Comments","LogIn","SignUp","Welcome","hash","window","location","substring","split","reduce","initial","item","parts","decodeURIComponent","App","constructor","handleSignUpOpen","setState","isSigningUp","isViewingPosts","isLoggingIn","isViewingComments","handleSignUpClose","handleSignUp","UserName","isWelcoming","handleWelcomeGoBack","handleLogInOpen","handleLogIn","isLoggedIn","handleLogOut","fetch","then","res","json","result","token","access_token","isLoggedInWithSpotify","handleLogInClose","handleViewComments","e","commentsData","PostID","PostSong","PostDescription","pageNumber","PostDate","Playlist","handleGoBackComments","commentsPostID","state","spotifyUserID","componentDidMount","_token","headers","Authorization","console","log","display_name","id","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"bootswatch/dist/cosmo/bootstrap.min.css\";\r\nimport \"./App.scss\";\r\nimport Posts from \"./components/posts/posts\";\r\nimport Post from \"./components/posts/post\";\r\nimport Navbar from \"./components/navbar/navbar\";\r\nimport Comments from \"./components/comments/comments\";\r\nimport LogIn from \"./components/users/login\";\r\nimport SignUp from \"./components/users/signUp\";\r\nimport Welcome from \"./components/users/welcome\";\r\n\r\nconst hash = window.location.hash\r\n  .substring(1)\r\n  .split(\"&\")\r\n  .reduce(function(initial, item) {\r\n    if (item) {\r\n      var parts = item.split(\"=\");\r\n      initial[parts[0]] = decodeURIComponent(parts[1]);\r\n    }\r\n    return initial;\r\n  }, {});\r\n\r\nwindow.location.hash = \"\";\r\n\r\nclass App extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      token: \"\",\r\n      isLoggedIn: false,\r\n      isLoggedInWithSpotify: false,\r\n      UserName: \"\",\r\n      spotifyUserID: \"\",\r\n      isWelcoming: false,\r\n      isSigningUp: false,\r\n      isLoggingIn: false,\r\n      isViewingPosts: false,\r\n      isViewingComments: false,\r\n\r\n      commentsData: {\r\n        UserName: \"\",\r\n        PostID: -1,\r\n        PostSong: \"\",\r\n        PostDescription: \"\",\r\n        pageNumber: 0,\r\n        PostDate: \"\",\r\n        Playlist: \"\"\r\n      }\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    let _token = hash.access_token;\r\n    if (_token) {\r\n      //use spotify implicit grant token\r\n      this.setState({ token: _token }, () => {\r\n        fetch(\"https://api.spotify.com/v1/me\", {\r\n          headers: {\r\n            Authorization: `Bearer ${this.state.token}`\r\n          }\r\n        })\r\n          .then(res => {\r\n            return res.json();\r\n          })\r\n          .then(result => {\r\n            console.log(result);\r\n            this.setState({\r\n              isLoggedIn: true,\r\n              isLoggedInWithSpotify: true,\r\n              UserName: result.display_name,\r\n              spotifyUserID: result.id,\r\n              isViewingPosts: true\r\n            });\r\n          });\r\n      });\r\n    } else {\r\n      //use spotify client creditials flow token\r\n      fetch(\"/api/token\")\r\n        .then(res => res.json())\r\n        .then(result => this.setState({ token: result.access_token }))\r\n        .then(this.setState({ isViewingPosts: true }));\r\n    }\r\n  }\r\n\r\n  handleSignUpOpen = () => {\r\n    this.setState({\r\n      isSigningUp: true,\r\n      isViewingPosts: false,\r\n      isLoggingIn: false,\r\n      isViewingComments: false\r\n    });\r\n  };\r\n\r\n  handleSignUpClose = () => {\r\n    this.setState({\r\n      isSigningUp: false,\r\n      isViewingPosts: true,\r\n      isLoggingIn: false,\r\n      isViewingComments: false\r\n    });\r\n  };\r\n\r\n  handleSignUp = UserName => {\r\n    this.setState({ UserName: UserName, isWelcoming: true });\r\n    this.handleSignUpClose();\r\n  };\r\n\r\n  handleWelcomeGoBack = () => {\r\n    this.setState({ isWelcoming: false, UserName: \"\" }, this.handleLogInOpen());\r\n  };\r\n\r\n  handleLogIn = UserName => {\r\n    this.setState({\r\n      UserName: UserName,\r\n      isLoggedIn: true,\r\n      isViewingPosts: true,\r\n      isLoggingIn: false\r\n    });\r\n  };\r\n\r\n  handleLogOut = () => {\r\n    fetch(\"/api/token\")\r\n      .then(res => res.json())\r\n      .then(result => this.setState({ token: result.access_token }))\r\n      .then(\r\n        this.setState({\r\n          isLoggedIn: false,\r\n          UserName: \"\",\r\n          isLoggedInWithSpotify: false\r\n        })\r\n      );\r\n  };\r\n\r\n  handleLogInOpen = () => {\r\n    this.setState({\r\n      isLoggingIn: true,\r\n      isViewingPosts: false,\r\n      isSigningUp: false,\r\n      isViewingComments: false\r\n    });\r\n  };\r\n\r\n  handleLogInClose = () => {\r\n    this.setState({\r\n      isLoggingIn: false,\r\n      isViewingPosts: true,\r\n      isSigningUp: false,\r\n      isViewingComments: false\r\n    });\r\n  };\r\n\r\n  handleViewComments = e => {\r\n    this.setState({\r\n      isViewingPosts: false,\r\n      isViewingComments: true,\r\n      commentsData: {\r\n        UserName: e.UserName,\r\n        PostID: e.PostID,\r\n        PostSong: e.PostSong,\r\n        PostDescription: e.PostDescription,\r\n        pageNumber: e.pageNumber,\r\n        PostDate: e.PostDate,\r\n        Playlist: e.Playlist\r\n      }\r\n    });\r\n  };\r\n\r\n  handleGoBackComments = () => {\r\n    this.setState({\r\n      isViewingPosts: true,\r\n      isViewingComments: false,\r\n      commentsPostID: -1\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        {this.state.isWelcoming && (\r\n          <Welcome\r\n            UserName={this.state.UserName}\r\n            handleWelcomeGoBack={this.handleWelcomeGoBack}\r\n          />\r\n        )}\r\n        <Navbar\r\n          UserName={this.state.UserName}\r\n          isLoggedIn={this.state.isLoggedIn}\r\n          handleSignUpOpen={this.handleSignUpOpen}\r\n          handleLogInOpen={this.handleLogInOpen}\r\n          handleLogOut={this.handleLogOut}\r\n        />\r\n        <div className=\"container\">\r\n          {this.state.isSigningUp && (\r\n            <SignUp\r\n              handleSignUpClose={this.handleSignUpClose}\r\n              handleSignUp={this.handleSignUp}\r\n            />\r\n          )}\r\n          {this.state.isLoggingIn && (\r\n            <LogIn\r\n              handleLogInClose={this.handleLogInClose}\r\n              handleLogIn={this.handleLogIn}\r\n            />\r\n          )}\r\n          {this.state.isViewingComments && (\r\n            <div>\r\n              <button\r\n                className=\"btn btn-secondary go-back-comments\"\r\n                onClick={this.handleGoBackComments}\r\n              >\r\n                Go Back\r\n              </button>\r\n              <div className=\"posts-container\">\r\n                <Post\r\n                  UserName={this.state.commentsData.UserName}\r\n                  currentUserName={this.state.UserName}\r\n                  PostID={this.state.commentsData.PostID}\r\n                  song={this.state.commentsData.PostSong}\r\n                  description={this.state.commentsData.PostDescription}\r\n                  PostDate={this.state.commentsData.PostDate}\r\n                  Playlist={this.state.commentsData.Playlist}\r\n                  token={this.state.token}\r\n                  isViewingComments={this.state.isViewingComments}\r\n                />\r\n              </div>\r\n              <Comments\r\n                isLoggedIn={this.state.isLoggedIn}\r\n                isLoggedInWithSpotify={this.state.isLoggedInWithSpotify}\r\n                UserName={this.state.commentsData.UserName}\r\n                currentUserName={this.state.UserName}\r\n                PostID={this.state.commentsData.PostID}\r\n                Playlist={this.state.commentsData.Playlist}\r\n                handleGoBackComments={this.handleGoBackComments}\r\n                token={this.state.token}\r\n              />\r\n            </div>\r\n          )}\r\n          {this.state.isViewingPosts && (\r\n            <Posts\r\n              isLoggedIn={this.state.isLoggedIn}\r\n              isLoggedInWithSpotify={this.state.isLoggedInWithSpotify}\r\n              currentUserName={this.state.UserName}\r\n              spotifyUserID={this.state.spotifyUserID}\r\n              handleViewComments={this.handleViewComments}\r\n              isViewingComments={this.state.isViewingComments}\r\n              pageNumber={this.state.commentsData.pageNumber}\r\n              token={this.state.token}\r\n            />\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}