{"ast":null,"code":"var _jsxFileName = \"/Users/averyboutin/Repos/OurSongs/client/src/components/posts/posts.jsx\";\nimport React, { Component } from \"react\";\nimport Post from \"./post\";\nimport \"./posts.scss\";\nimport NewPost from \"./newPost\";\n\nclass Posts extends Component {\n  constructor() {\n    super();\n\n    this.refreshPosts = () => {\n      fetch(\"/api/posts/page/\".concat(this.state.numPosts, \"/\").concat(this.state.pageNumber)).then(res => res.json()).then(posts => this.setState({\n        posts\n      }, () => console.log(\"\".concat(this.state.numPosts, \" posts fetched on page \").concat(this.state.pageNumber), posts))).then(() => this.getPostCount());\n    };\n\n    this.getPostCount = () => {\n      fetch(\"/api/posts/count\").then(res => res.json()).then(res => this.setState({\n        postCount: res.Count\n      }, () => console.log(\"\".concat(this.state.postCount, \" posts total\"), res)));\n    };\n\n    this.handlePreviousPage = () => {\n      if (this.state.pageNumber > 0) {\n        const previousPage = this.state.pageNumber - 1;\n        this.setState({\n          pageNumber: previousPage\n        }, () => {\n          this.refreshPosts();\n        });\n      }\n    };\n\n    this.handleNextPage = () => {\n      if (this.state.numPosts * (this.state.pageNumber + 1) < this.state.postCount) {\n        const nextPage = this.state.pageNumber + 1;\n        this.setState({\n          pageNumber: nextPage\n        }, () => {\n          this.refreshPosts();\n        });\n      }\n    };\n\n    this.state = {\n      posts: [],\n      numPosts: 5,\n      pageNumber: 0,\n      postCount: 0\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      pageNumber: this.props.pageNumber\n    }, () => {\n      this.refreshPosts();\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"posts-section\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \"Posts\"), this.props.isLoggedIn && React.createElement(NewPost, {\n      refresh: this.refreshPosts,\n      token: this.props.token,\n      currentUserName: this.props.currentUserName,\n      isLoggedInWithSpotify: this.props.isLoggedInWithSpotify,\n      spotifyUserID: this.props.spotifyUserID,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"posts-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, this.state.posts.map(post => React.createElement(Post, {\n      key: post.PostID,\n      postID: post.PostID,\n      refresh: this.refreshPosts,\n      description: post.PostDescription,\n      song: post.PostSong,\n      UserName: post.UserName,\n      numComments: post.numComments,\n      PostDate: post.PostDate,\n      Playlist: post.Playlist,\n      currentUserName: this.props.currentUserName,\n      token: this.props.token,\n      handleViewComments: this.props.handleViewComments,\n      isViewingComments: this.props.isViewingComments,\n      pageNumber: this.state.pageNumber,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"pageNav\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: this.state.pageNumber === 0 ? \"btn btn-secondary btn-muted\" : \"btn btn-secondary\",\n      onClick: this.handlePreviousPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"Previous Page\"), React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, \"page \", this.state.pageNumber + 1), React.createElement(\"button\", {\n      className: this.state.numPosts * (this.state.pageNumber + 1) >= this.state.postCount ? \"btn btn-secondary btn-muted\" : \"btn btn-secondary\",\n      onClick: this.handleNextPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"Next Page\")));\n  }\n\n}\n\nexport default Posts;","map":{"version":3,"sources":["/Users/averyboutin/Repos/OurSongs/client/src/components/posts/posts.jsx"],"names":["React","Component","Post","NewPost","Posts","constructor","refreshPosts","fetch","state","numPosts","pageNumber","then","res","json","posts","setState","console","log","getPostCount","postCount","Count","handlePreviousPage","previousPage","handleNextPage","nextPage","componentDidMount","props","render","isLoggedIn","token","currentUserName","isLoggedInWithSpotify","spotifyUserID","map","post","PostID","PostDescription","PostSong","UserName","numComments","PostDate","Playlist","handleViewComments","isViewingComments"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Post from \"./post\";\r\nimport \"./posts.scss\";\r\nimport NewPost from \"./newPost\";\r\n\r\nclass Posts extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      posts: [],\r\n      numPosts: 5,\r\n      pageNumber: 0,\r\n      postCount: 0\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ pageNumber: this.props.pageNumber }, () => {\r\n      this.refreshPosts();\r\n    });\r\n  }\r\n\r\n  refreshPosts = () => {\r\n    fetch(`/api/posts/page/${this.state.numPosts}/${this.state.pageNumber}`)\r\n      .then(res => res.json())\r\n      .then(posts =>\r\n        this.setState({ posts }, () =>\r\n          console.log(\r\n            `${this.state.numPosts} posts fetched on page ${this.state.pageNumber}`,\r\n            posts\r\n          )\r\n        )\r\n      )\r\n      .then(() => this.getPostCount());\r\n  };\r\n\r\n  getPostCount = () => {\r\n    fetch(\"/api/posts/count\")\r\n      .then(res => res.json())\r\n      .then(res =>\r\n        this.setState({ postCount: res.Count }, () =>\r\n          console.log(`${this.state.postCount} posts total`, res)\r\n        )\r\n      );\r\n  };\r\n\r\n  handlePreviousPage = () => {\r\n    if (this.state.pageNumber > 0) {\r\n      const previousPage = this.state.pageNumber - 1;\r\n      this.setState({ pageNumber: previousPage }, () => {\r\n        this.refreshPosts();\r\n      });\r\n    }\r\n  };\r\n\r\n  handleNextPage = () => {\r\n    if (\r\n      this.state.numPosts * (this.state.pageNumber + 1) <\r\n      this.state.postCount\r\n    ) {\r\n      const nextPage = this.state.pageNumber + 1;\r\n      this.setState({ pageNumber: nextPage }, () => {\r\n        this.refreshPosts();\r\n      });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"posts-section\">\r\n        <h1>Posts</h1>\r\n        {this.props.isLoggedIn && (\r\n          <NewPost\r\n            refresh={this.refreshPosts}\r\n            token={this.props.token}\r\n            currentUserName={this.props.currentUserName}\r\n            isLoggedInWithSpotify={this.props.isLoggedInWithSpotify}\r\n            spotifyUserID={this.props.spotifyUserID}\r\n          />\r\n        )}\r\n\r\n        <div className=\"posts-container\">\r\n          {this.state.posts.map(post => (\r\n            <Post\r\n              key={post.PostID}\r\n              postID={post.PostID}\r\n              refresh={this.refreshPosts}\r\n              description={post.PostDescription}\r\n              song={post.PostSong}\r\n              UserName={post.UserName}\r\n              numComments={post.numComments}\r\n              PostDate={post.PostDate}\r\n              Playlist={post.Playlist}\r\n              currentUserName={this.props.currentUserName}\r\n              token={this.props.token}\r\n              handleViewComments={this.props.handleViewComments}\r\n              isViewingComments={this.props.isViewingComments}\r\n              pageNumber={this.state.pageNumber}\r\n            />\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"pageNav\">\r\n          <button\r\n            className={\r\n              this.state.pageNumber === 0\r\n                ? \"btn btn-secondary btn-muted\"\r\n                : \"btn btn-secondary\"\r\n            }\r\n            onClick={this.handlePreviousPage}\r\n          >\r\n            Previous Page\r\n          </button>\r\n\r\n          <h4>page {this.state.pageNumber + 1}</h4>\r\n\r\n          <button\r\n            className={\r\n              this.state.numPosts * (this.state.pageNumber + 1) >=\r\n              this.state.postCount\r\n                ? \"btn btn-secondary btn-muted\"\r\n                : \"btn btn-secondary\"\r\n            }\r\n            onClick={this.handleNextPage}\r\n          >\r\n            Next Page\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Posts;\r\n"]},"metadata":{},"sourceType":"module"}